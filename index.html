<!-- Ehsan Sherkat - Project -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
    <!-- favicon -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Interactive Clustering v2.0.0</title>
    <link rel="stylesheet" href="css/jquery-ui.css" />
    <!-- should be the first -->
    <script src="js/jquery-1.10.2.js"></script>
    <script src="js/jquery-ui.js"></script>

    <!-- for tooltips -->
    <link type="text/css" rel="stylesheet" href="css/jquery.qtip.min.css" />
    <script type="text/javascript" src="js/jquery.qtip.min.js"></script>

    <!-- for tree view -->
    <link rel="stylesheet" href="css/style.min.css" />
    <script src="js/jstree.min.js"></script>
    <!-- -->
    <script src="js/jquery.ui.core.js"></script>
    <script src="js/jquery.ui.widget.js"></script>
    <script src="js/jquery.ui.mouse.js"></script>
    <script src="js/jquery.ui.draggable.js"></script>
    <script src="js/jquery-collision.js"></script>
    <script src="js/jquery-ui-draggable-collision.js"></script>

    <!-- for highlighting terms -->
    <script src="js/jquery.highlight-5.js"></script>

    <!-- for context menu -->
    <script src="js/jquery.ui.position.js" type="text/javascript"></script>
    <script src="js/jquery.contextMenu.js" type="text/javascript"></script>
    <link href="css/jquery.contextMenu.css" rel="stylesheet" type="text/css" />

    <!-- for local explanation chart-->
    <link href="css/localExplanation.css" rel="stylesheet" type="text/css" />

    <!-- for D3 -->
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="js/d3.js" charset="utf-8"></script>
    <script src="js/d3.tip.v0.6.3.js"></script>

    <script src="js/d3.layout.cloud.js"></script>
    <!-- for word cloud -->

    <!-- for dialogue -->
    <link
      type="text/css"
      rel="stylesheet"
      href="css/jquery-impromptu.min.css"
    />
    <script type="text/javascript" src="js/jquery-impromptu.min.js"></script>

    <!-- for color palette -->

    <!-- for documents projection in graph view -->
    <script src="js/tsne.js"></script>

    <!-- my codes -->
    <link href="css/main.css" type="text/css" rel="stylesheet" />
    <script src="js/style.js" charset="utf-8"></script>
    <script src="js/main.js" charset="utf-8"></script>
    <script src="
https://cdn.jsdelivr.net/npm/intro.js@7.2.0/intro.min.js
"></script>
<link href="
https://cdn.jsdelivr.net/npm/intro.js@7.2.0/minified/introjs.min.css
" rel="stylesheet">
</head>
  <body onload="pageLoad()" onbeforeunload="return pageClose()">
    <!----------------------- panel1 -------------------------->
    
    <div id="panel1">
      <div style="display: flex; justify-content: center; align-items: center; height: 100%;">
        <p class="mainTitle" style="font-weight: bold; width: 100%; text-align: center; font-size: 2vw; margin: 0;">
          Explanation for Document Clustering
        </p>
      </div>
      <input
        id="button1"
        title="Help"
        class="button"
        type="button"
        value="Help"
        onclick="openHelpPage()"
      />

    </div>

    <!----------------------- panel2 (document view) -------------------------->
    <div
      class="resizable"
      id="panel2"
      ondrag="panelDrag(this)"
      onclick="panelDrag(this)">
      <p id="panel2title" class="panelTitle">Document View</p>
      <p id="doc_content"></p>
      
    </div>

    <!----------------------- panel3 (Cluster Key Terms) -------------------------->
    <div
      class="resizable"
      id="panel3"
      ondrag="panelDrag(this)"
      onclick="panelDrag(this)"
    >
      <p id="panel3title" class="panelTitle">Cluster Keyterms View</p>
      <div id="panel3scroll">
        <div id="word_lists">
          <ol id="selectable"></ol>
        </div>
        <div id="barcharts"></div>
      </div>
    </div>

    <!----------------------- panel4 (Clusters) -------------------------->
    <div
      class="resizable"
      id="panel4"
      onclick="enableDrag()"
      ondrag="panelDrag(this)"
    >
      <p id="panel4title" class="panelTitle">Clusters View</p>
      <!-- <input
        id="button12"
        title="Add Cluster"
        class="button"
        type="button"
        value="Add Cluster"
        onclick="addCluster()"
      /> -->
      <!-- <label id="silhouette"></label> dscdsc-->
      <label id="userName"></label>
      <div id="spliter1"></div>
      <!-- spliter line -->
      <div id="panel4_1">
        <!-- clusters are here! -->
      </div>
    </div>

    <!----------------------- panel5 (Cluster Tree View) -------------------------->
    <div
      class="resizable"
      id="panel5"
      ondrag="panelDrag(this)"
      onclick="panelDrag(this)"
    >
      <p id="panel5title" class="panelTitle">Cluster Tree View</p>
      <div id="cluster_tree_view">
        <ul>
          <li
            data-jstree='{ "opened" : true }'
            class="context-menu-zero box menu-1"
          >
            Clusters
          </li>
          <!-- cluster list goes here! -->
        </ul>
      </div>
    </div>
    <div id="docText" class="popup" style="display: none;"></div>

    <!----------------------- panel7 (Term-Cluster View) -------------------------->
    <div
      class="resizable"
      id="panel7"
      ondrag="panelDrag(this)"
      onclick="panelDrag(this)"
    >
      <p id="panel7title" class="panelTitle">Term-Cluster View</p>
      <div id="TermClusterView">
        <!-- the svg of paralelCordinator goes here -->
      </div>
    </div>

    <!----------------------- panel8 (Term Cloud) -------------------------->
    <div
      class="resizable"
      id="panel8"
      ondrag="panelDrag(this)"
      onclick="panelDrag(this)"
    >
      <div>
        <p id="panel8title" class="panelTitle">Term Cloud View</p>
        <input
          id="button6"
          title="Cluster Cloud"
          class="button"
          type="button"
          value="Rearrange"
          onclick="loadCloudAgain()"
        />
        <!-- <input
          id="button7"
          title="My Cloud"
          class="button"
          type="button"
          value="My Cloud"
          onclick="showMyCloud()"
        /> -->
        <!-- <input
          id="button8"
          title="Clear Cloud"
          class="button"
          type="button"
          value="Clear Cloud"
          onclick="clearCloud()"
        /> -->
        <!-- <p id="colorCheckBox">
          Color:<input type="checkbox" id="cloudColor" />
        </p> -->
      </div>
      <div id="panel8_2">
        <!-- Term cloud goes here -->
      </div>
    </div>
    <!----------------------- panel9 (Local Explanation) -------------------------->
    <div
      class="resizable"
      id="panel9"
      ondrag="panelDrag(this)"
      onclick="panelDrag(this)"
    >
      <p id="panel9title" class="panelTitle">Local Explanation</p>
      <div
        id="chart"
        style="
                            display: inline-block;
                        position: relative;
                        width: 90%;
                        height: 90%;
                        vertical-align: top;
                        overflow: auto; 
                        "
      >
        <!-- the svg of paralelCordinator goes here -->
      </div>
    </div>
    <script type="text/javascript" src="js/palette.js"></script>
    <!------------------------panel 10 (Feedback form) -------------------------->
    
    <div id="feedbackModal" class="modal resizable" ondrag="panelDrag(this)" onclick="panelDrag(this)">
      <p id="panel10title" class="panelTitle">Explanation Evaluation</p>
      <!-- set display style to none -->
      <div class="modal-content" style="display: none;" id="feedbackFormContent">
        <p id="question1">1) Does the local explanation logically support the document's assignment to </p>
        <input type="radio" id="yes" name="support" value="Yes">
        <label for="yes">Yes</label>
        <input type="radio" id="no" name="support" value="No">
        <label for="no">No</label><br>
    
        <div id="textualResponse" style="display:none;">
          <br>
          <textarea id="feedbackText" placeholder="Enter your feedback here..."></textarea><br>
        </div>
    
        <p>2) Are you satisfied with the depth and detail of the explanation?</p>
        <form>
          <div id="satisfactionScaleRadioButton">
            <input type="radio" id="scale1" name="satisfaction" value="1">
            <label for="scale1">Strongly Agree</label>
          </div>
          <div id="satisfactionScaleRadioButton">
            <input type="radio" id="scale2" name="satisfaction" value="2">
            <label for="scale2">Agree</label>
          </div>
          <div id="satisfactionScaleRadioButton">
            <input type="radio" id="scale3" name="satisfaction" value="3">
            <label for="scale3">Neutral</label>
          </div>
          <div id="satisfactionScaleRadioButton">
            <input type="radio" id="scale4" name="satisfaction" value="4">
            <label for="scale4">Disagree</label>
          </div>
          <div id="satisfactionScaleRadioButton">
            <input type="radio" id="scale5" name="satisfaction" value="5">
            <label for="scale5">Strongly Disagree</label>
          </div>
        </form>
        <div class="submit-button-container">
          <button onclick="submitFeedback()">Submit Feedback and Continue</button>
        </div>
      </div>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
    // Select the radio buttons for the "support" question
    var yesButton = document.getElementById('yes');
    var noButton = document.getElementById('no');

    // Function to toggle the visibility of the feedback textarea
    function toggleFeedbackTextArea() {
        var feedbackTextArea = document.getElementById('textualResponse');
        if(noButton.checked) {
            // If "No" is selected, show the textarea
            feedbackTextArea.style.display = 'block';
        } else {
            // Otherwise, hide it
            feedbackTextArea.style.display = 'none';
        }
    }

    // Add click event listeners to both radio buttons
    yesButton.addEventListener('click', toggleFeedbackTextArea);
    noButton.addEventListener('click', toggleFeedbackTextArea);
});

    </script>
    
</div>
<div id="fullpage" style="display: none;"></div>
  
<script>
  document.addEventListener('DOMContentLoaded', function(event) {
      introJs().setOptions({
          steps: [
            {
              intro:"<strong>Purpose of this study</strong>\n\n        Before we discuss what the tool on which this user study is based, let's take a moment to understand the purpose of this study. The goal is to evaluate the effectiveness of the `EXPLANATION` for  AI driven document clustering. The AI has clustered the documents based on the concepts it has identified in the documents. The explanation is designed to help you understand why the AI has clustered the documents in the way it has. Your feedback will help us improve the AI's performance and the explanation quality. Click 'Next' to continue.",
              tooltipClass: 'wideTooltip'
            },
            {intro:" <strong>Who are you?</strong>\n\n  Imagine you are a lead editor of an online news portal.Your role is to organize numerous news articles into understandable categories, using an advanced AI algorithm for clustering. This AI identifies unique patterns, suggesting newsworthy groupings beyond standard categories. Your task involves two main challenges: identifying the essence of AI-suggested clusters by naming and defining them, and evaluating the AI's explanations for article placements to ensure they're logical and align with the themes. This effort aims to deepen story understanding and improve how news is categorized for readers.",
            tooltipClass: 'wideTooltip'},
              {
                  intro: "<strong>Welcome to our software!</strong>\n\n This platform assists you in understanding AI-driven document clustering. It's designed to clarify how decisions are made to group documents. We'll start with a brief overview of the interface."
              },
              {
                  element: document.querySelector('#panel5'),
                  intro: "Meet the Cluster Tree View. Here, the clusters created by the AI are presented. You can expand each cluster to see its documents and hover over them to preview their contents."
              }, 
              {
                  element: document.querySelector('#panel2'),
                  intro: "This is the Document View, displaying one document at a time. Notice the highlighted text - these colors represent key concepts that influence the document's cluster classification."
              },
              {
                  element: document.querySelector('#panel9'),
                  intro: "Now, observe the Local Explanation View. It demonstrates a document's connection to a cluster on a vertical scale. Horizontal bars indicate clusters, filled with the contribution of each concept that's highlighted in the Document View. The black dots reflect the document's final clustering, considering all concept contributions."
              },
              {
                  element: document.querySelector('#feedbackModal'),
                  intro: "The Explanation Evaluation View invites your feedback on the explanation clarity.\nThe first query seeks your agreement on whether the document's clustering rationale appears logical, examining the contribution of highlighted concepts.\nThe second question gauges your satisfaction with the provided explanation detail, asking if you feel fully informed about the AI's clustering decision."
              },
              {
              intro: "Please evaluate the explanation and provide feedback. Your input will help us improve the AI's performance and the explanation quality. Click 'Submit Feedback and Continue' to proceed."
              }
          ]
      }).start();
  });
  
  document.addEventListener('startSecondTutorial', function(event) {
      introJs().setOptions({
          steps: [
              {
                  intro: "Having looked at individual document details, let's zoom out to the broader themes the AI has identified for the clusters. We'll also look at how these themes correlate with their defining terms. Ready to explore more?"
              },
              {
                  element: document.querySelector('#panel4'),
                  intro: "Here's the Clusters View. It lists defining concepts for each cluster, which you can scroll through. Analyze these to better understand each cluster's essence. Customize by right-clicking to rename any cluster. Clicking on different clusters or terms will update other views correspondingly."
              },
              {
                  element: document.querySelector('#panel8'),
                  intro: "In the Term Cloud View, see a visual array of terms representing the currently selected cluster. Larger terms have greater significance within that cluster, highlighting the predominant themes and concepts."
              },
              {
                  element: document.querySelector('#panel3'),
                  intro: "The Cluster Keyterms View shows key terms and their significance within a cluster, depicted by the length of the horizontal bars."
              },
              {
                  element: document.querySelector('#panel7'),
                  intro: "Finally, the Term-Cluster View charts the distribution of key terms across all clusters, allowing you to compare their significance in each."
              }
          ]
      }).start();
  });
  </script>
  
</body>
</html>
