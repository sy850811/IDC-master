<!-- Ehsan Sherkat - Project -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
    <!-- favicon -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Interactive Clustering v2.0.0</title>
    <link rel="stylesheet" href="css/jquery-ui.css" />
    <!-- should be the first -->
    <script src="js/jquery-1.10.2.js"></script>
    <script src="js/jquery-ui.js"></script>

    <!-- for tooltips -->
    <link type="text/css" rel="stylesheet" href="css/jquery.qtip.min.css" />
    <script type="text/javascript" src="js/jquery.qtip.min.js"></script>

    <!-- for tree view -->
    <link rel="stylesheet" href="css/style.min.css" />
    <script src="js/jstree.min.js"></script>
    <!-- -->
    <script src="js/jquery.ui.core.js"></script>
    <script src="js/jquery.ui.widget.js"></script>
    <script src="js/jquery.ui.mouse.js"></script>
    <script src="js/jquery.ui.draggable.js"></script>
    <script src="js/jquery-collision.js"></script>
    <script src="js/jquery-ui-draggable-collision.js"></script>

    <!-- for highlighting terms -->
    <script src="js/jquery.highlight-5.js"></script>

    <!-- for context menu -->
    <script src="js/jquery.ui.position.js" type="text/javascript"></script>
    <script src="js/jquery.contextMenu.js" type="text/javascript"></script>
    <link href="css/jquery.contextMenu.css" rel="stylesheet" type="text/css" />

    <!-- for local explanation chart-->
    <link href="css/localExplanation.css" rel="stylesheet" type="text/css" />

    <!-- for D3 -->
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="js/d3.js" charset="utf-8"></script>
    <script src="js/d3.tip.v0.6.3.js"></script>

    <script src="js/d3.layout.cloud.js"></script>
    <!-- for word cloud -->

    <!-- for dialogue -->
    <link
      type="text/css"
      rel="stylesheet"
      href="css/jquery-impromptu.min.css"
    />
    <script type="text/javascript" src="js/jquery-impromptu.min.js"></script>

    <!-- for color palette -->

    <!-- for documents projection in graph view -->
    <script src="js/tsne.js"></script>

    <!-- my codes -->
    <link href="css/main.css" type="text/css" rel="stylesheet" />
    <script src="js/style.js" charset="utf-8"></script>
    <script src="js/main.js" charset="utf-8"></script>
    <script src="
https://cdn.jsdelivr.net/npm/intro.js@7.2.0/intro.min.js
"></script>
<link href="
https://cdn.jsdelivr.net/npm/intro.js@7.2.0/minified/introjs.min.css
" rel="stylesheet">
</head>
  <body onload="pageLoad()" onbeforeunload="return pageClose()">
    <!----------------------- panel1 -------------------------->
    
    <div id="panel1">
      <div style="display: flex; justify-content: center; align-items: center; height: 100%;">
        <p class="mainTitle" style="font-weight: bold; width: 100%; text-align: center; font-size: 2vw; margin: 0;">
          Explanation for Document Clustering
        </p>
      </div>
      <input
        id="button1"
        title="Help"
        class="button"
        type="button"
        value="Help"
        onclick="openHelpPage()"
      />

    </div>

    <!----------------------- panel2 (document view) -------------------------->
    <div
      class="resizable"
      id="panel2"
      ondrag="panelDrag(this)"
      onclick="panelDrag(this)">
      <p id="panel2title" class="panelTitle">Document View</p>
      <p id="doc_content"></p>
      
    </div>

    <!----------------------- panel3 (Cluster Key Terms) -------------------------->
    <div
      class="resizable"
      id="panel3"
      ondrag="panelDrag(this)"
      onclick="panelDrag(this)"
    >
      <p id="panel3title" class="panelTitle">Cluster Keyterms View</p>
      <div id="panel3scroll">
        <div id="word_lists">
          <ol id="selectable"></ol>
        </div>
        <div id="barcharts"></div>
      </div>
    </div>

    <!----------------------- panel4 (Clusters) -------------------------->
    <div
      class="resizable"
      id="panel4"
      onclick="enableDrag()"
      ondrag="panelDrag(this)"
    >
      <p id="panel4title" class="panelTitle">Clusters View</p>

      <!-- <label id="silhouette"></label> dscdsc-->
      <label id="userName"></label>
      <div id="spliter1"></div>
      <!-- spliter line -->
      <div id="panel4_1">
        <!-- clusters are here! -->
      </div>
    </div>

    <!----------------------- panel5 (Cluster Tree View) -------------------------->
    <div
      class="resizable"
      id="panel5"
      ondrag="panelDrag(this)"
      onclick="panelDrag(this)"
    >
      <p id="panel5title" class="panelTitle">Cluster Tree View</p>
      <div id="cluster_tree_view">
        <ul>
          <li
            data-jstree='{ "opened" : true }'
            class="context-menu-zero box menu-1"
          >
            Clusters
          </li>
          <!-- cluster list goes here! -->
        </ul>
      </div>
    </div>
    <div id="docText" class="popup" style="display: none;"></div>

    <!----------------------- panel7 (Term-Cluster View) -------------------------->
    <div
      class="resizable"
      id="panel7"
      ondrag="panelDrag(this)"
      onclick="panelDrag(this)"
    >
      <p id="panel7title" class="panelTitle">Term-Cluster View</p>
      <div id="TermClusterView">
        <!-- the svg of paralelCordinator goes here -->
      </div>
    </div>

    <!----------------------- panel8 (Term Cloud) -------------------------->
    <div
      class="resizable"
      id="panel8"
      ondrag="panelDrag(this)"
      onclick="panelDrag(this)"
    >
      <div>
        <p id="panel8title" class="panelTitle">Term Cloud View</p>
        <input
          id="button6"
          title="Cluster Cloud"
          class="button"
          type="button"
          value="Rearrange"
          onclick="loadCloudAgain()"
        />
        <!-- <input
          id="button7"
          title="My Cloud"
          class="button"
          type="button"
          value="My Cloud"
          onclick="showMyCloud()"
        /> -->
        <!-- <input
          id="button8"
          title="Clear Cloud"
          class="button"
          type="button"
          value="Clear Cloud"
          onclick="clearCloud()"
        /> -->
        <!-- <p id="colorCheckBox">
          Color:<input type="checkbox" id="cloudColor" />
        </p> -->
      </div>
      <div id="panel8_2">
        <!-- Term cloud goes here -->
      </div>
    </div>
    <!----------------------- panel9 (Local Explanation) -------------------------->
    <div
      class="resizable"
      id="panel9"
      ondrag="panelDrag(this)"
      onclick="panelDrag(this)"
    >
      <p id="panel9title" class="panelTitle">Local Explanation</p>
      <div
        id="chart"
        style="
                            display: inline-block;
                        position: relative;
                        width: 90%;
                        height: 90%;
                        vertical-align: top;
                        overflow: auto; 
                        "
      >
        <!-- the svg of paralelCordinator goes here -->
      </div>
    </div>
    <script type="text/javascript" src="js/palette.js"></script>
    <!------------------------panel 10 (Feedback form) -------------------------->
    
    <div id="feedbackModal" class="modal resizable" ondrag="panelDrag(this)" onclick="panelDrag(this)">
      <p id="panel10title" class="panelTitle">Explanation Evaluation</p>
      <!-- set display style to none -->
      <div class="modal-content" style="display: none;" id="feedbackFormContent">
        <p id="question1">1) Does the local explanation logically support the document's assignment to </p>
        <input type="radio" id="yes" name="support" value="Yes">
        <label for="yes">Yes</label>
        <input type="radio" id="no" name="support" value="No">
        <label for="no">No</label><br>
    
        <div id="textualResponse" style="display:none;">
          <br>
          <textarea id="feedbackText" placeholder="Enter your feedback here..."></textarea><br>
        </div>
    
        <p>2) Are you satisfied with the depth and detail of the explanation?</p>
        <form>
          <div id="satisfactionScaleRadioButton">
            <input type="radio" id="scale1" name="satisfaction" value="5">
            <label for="scale1">Strongly Agree</label>
          </div>
          <div id="satisfactionScaleRadioButton">
            <input type="radio" id="scale2" name="satisfaction" value="4">
            <label for="scale2">Agree</label>
          </div>
          <div id="satisfactionScaleRadioButton">
            <input type="radio" id="scale3" name="satisfaction" value="3">
            <label for="scale3">Neutral</label>
          </div>
          <div id="satisfactionScaleRadioButton">
            <input type="radio" id="scale4" name="satisfaction" value="2">
            <label for="scale4">Disagree</label>
          </div>
          <div id="satisfactionScaleRadioButton">
            <input type="radio" id="scale5" name="satisfaction" value="1">
            <label for="scale5">Strongly Disagree</label>
          </div>
        </form>
        <div class="submit-button-container">
          <button onclick="submitFeedback()">Submit Feedback and Continue</button>
        </div>
      </div>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
    // Select the radio buttons for the "support" question
    var yesButton = document.getElementById('yes');
    var noButton = document.getElementById('no');

    // Function to toggle the visibility of the feedback textarea
    function toggleFeedbackTextArea() {
        var feedbackTextArea = document.getElementById('textualResponse');
        if(noButton.checked) {
            // If "No" is selected, show the textarea
            feedbackTextArea.style.display = 'block';
        } else {
            // Otherwise, hide it
            feedbackTextArea.style.display = 'none';
        }
    }

    // Add click event listeners to both radio buttons
    yesButton.addEventListener('click', toggleFeedbackTextArea);
    noButton.addEventListener('click', toggleFeedbackTextArea);
});

    </script>
    
</div>
<div id="fullpage" style="display: none;"></div>
  
<script>
  document.addEventListener('DOMContentLoaded', function(event) {
      introJs().setOptions({
        exitOnOverlayClick: false, // Prevent closing the tutorial when clicking outside
        exitOnEsc: false, // Prevent closing the tutorial when pressing the Escape key
          steps: [
            {
              intro:"<strong><center>Welcome</center></strong><br>Before discussing the tool used for this user study, let's clarify the purpose of our research. We aim to understand AI's reasoning for clustering documents. This tool demonstrates the AI's justifications (using concepts from the documents) to form clusters. Please examine these justifications/explanations and provide your feedback. Please click 'Next' to continue the tutorial."
            },
            {intro:" <strong><center>Who are you?</center></strong><br> Imagine stepping into the role of a lead editor at a premier online news portal. Your new task involves utilizing an innovative tool designed to organize news articles into distinct, coherent categories. This tool, powered by advanced AI, not only clusters articles but also provides explanations for its categorizations, highlighting unique patterns and suggesting novel groupings beyond the ordinary."},{intro:"Your critical mission is to assess these explanations. Are they clear? Do they convincingly justify the placement of articles within each cluster? This exercise isn't about evaluating the AI's ability to categorize per se but instead focusing on the rationale it provides. Your insights will play a pivotal role in refining how we understand and interact with AI, ensuring that it operates not just with precision, but with logic and transparency that align with human reasoning. Let's get started!"},
              {
                  intro: "<strong><center>Welcome to our AI's explanation tool<br>(for document clustering)!</center></strong><br> This platform assists you in understanding rationale of AI-driven document clustering. It's designed to clarify how decisions are made to group documents. We'll start with a brief overview of the interface."
              },
              {
                  element: document.querySelector('#panel5'),
                  intro: "Meet the Cluster Tree View. Here, the clusters created by the AI are presented. <br>You can expand each cluster to see its documents and hover over them to preview their contents."
              }, 
              {
                  element: document.querySelector('#panel2'),
                  intro: "This is the Document View, displaying one document at a time. Notice the highlighted text - these colors represent key concepts that influence the document's cluster classification."
              },
              {
                  element: document.querySelector('#panel9'),
                  intro: "Now, observe the Local Explanation View. The Local Explanation View graphically shows how concepts influences a document's classification into clusters. Positive numbers on the chart mean the concept is strongly related to that cluster, while negative numbers mean it's less related. The bars represent different clusters, color-coded by concepts. The size of each colored segment in the bars shows the impact level of that concept on the clustering decision. The black dots mark the overall result after considering all the concepts. This visual helps understand the document's placement and the reasoning behind the algorithm's decision for that specific clustering."
              },
              {
                  element: document.querySelector('#feedbackModal'),
                  intro: "The Explanation Evaluation View invites your feedback on the explanation clarity.\nThe first query seeks your agreement on whether the document's clustering rationale appears logical, examining the contribution of highlighted concepts.\nThe second question gauges your satisfaction with the provided explanation detail, asking if you feel fully informed about the AI's clustering decision."
              },
              {
              intro: "Please evaluate the explanation and provide feedback.<br>Once you submit feedback for the current document, you will be requested to submit input for another 19 documents, Where you <br>\
              <ul>\
                <li>Read the Document</li>\
                <li>Analyze the contribution of the colour-coded concepts of the document in the Local Explanation view</li>\
                <li>Submit feedback on the explanation for placing the current document in its cluster.Your input will help us improve the AI's performance and the quality of explanations. Click 'Submit Feedback and Continue' to proceed.</li>\
              </ul>"
              }
          ]
      }).start();
  });
  
  document.addEventListener('startSecondTutorial', function(event) {
      introJs().setOptions({
        tooltipClass: 'wide-tooltip',
        exitOnOverlayClick: false, // Prevent closing the tutorial when clicking outside
        exitOnEsc: false, // Prevent closing the tutorial when pressing the Escape key
          steps: [
              {
                  intro: "Having looked at individual document details, let's zoom out to the broader themes the AI has identified for the clusters. We'll also look at how these themes correlate with their defining terms. Ready to explore more?"
              },
              {
                  element: document.querySelector('#panel4'),
                  intro: "Here's the Clusters View. It lists defining concepts for each cluster, which you can scroll through. Analyze these to better understand each cluster's essence. Customize by double-clicking to rename any cluster. Clicking on different clusters or terms will update other views correspondingly."
              },
              {
                  element: document.querySelector('#panel8'),
                  intro: "The Term Cloud View displays a visual array of terms corresponding to the currently selected cluster, document, or nodes, as specified in the panel's title within parentheses. This representation uses variations in shade intensity and font size to illustrate the degree of relevance of each term to the selected element; terms that are more significantly related to the selected cluster appear in darker shades of gray and are presented in a larger font."
              },
              {
                  element: document.querySelector('#panel3'),
                  intro: "The Cluster Keyterms View shows the key terms of selected cluster. The header color of this panel is similar to the color of selected cluster in Clusters panel. The selected cluster has a red border line and gray background. The bar chart in front of each term shows the relatedness of the term to the selected cluster. Terms are sorted based on their relatedness in an increasing order (first terms are more similar to the cluster). The relatedness of selected term to each clusters will be shown in the Term-Cluster View panel."
              },
              {
                  element: document.querySelector('#panel7'),
                  intro: "Finally, the Term-Cluster View charts the distribution of key terms across all clusters, allowing you to compare their significance in each."
              },
              {
                  element: document.querySelector('#cluster0_title'),
                  intro: "Before submitting the feedback for the explanation for following documents, please explore the newly added infomation especially the Cluster View to <strong>assign an appropriate name to each cluster</strong>. You can do this by double clicking on the cluster name (cluster0, cluster1) in the Cluster View."
              }
          ]
      }).start();
  });
  </script>
  
</body>
</html>
